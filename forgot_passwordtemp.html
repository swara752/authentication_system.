
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Forgot Password</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .forgot-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 450px;
        overflow: hidden;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .forgot-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .forgot-header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      }

      .forgot-header h1 {
        font-weight: 600;
        font-size: 28px;
        margin-bottom: 8px;
        position: relative;
        z-index: 1;
      }

      .forgot-header p {
        opacity: 0.9;
        font-size: 14px;
        position: relative;
        z-index: 1;
      }

      .forgot-form {
        padding: 40px;
      }

      .form-group {
        margin-bottom: 25px;
        position: relative;
      }

      .form-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #333;
        font-size: 14px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .form-group input {
        width: 100%;
        padding: 15px 20px;
        border: 2px solid #e1e5e9;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: #f8f9fa;
      }

      .form-group input:focus {
        outline: none;
        border-color: #667eea;
        background: white;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        transform: translateY(-2px);
      }

      .form-group input.error {
        border-color: #e74c3c;
        background: #fdf2f2;
      }

      .form-group input.valid {
        border-color: #2ecc71;
        background: #f2fdf2;
      }

      .error-message {
        color: #e74c3c;
        font-size: 12px;
        margin-top: 8px;
        display: none;
        font-weight: 500;
        padding-left: 5px;
      }

      .error-message.show {
        display: block;
        animation: slideDown 0.3s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .button-group {
        display: flex;
        gap: 15px;
        margin-top: 30px;
      }

      .submit-button {
        flex: 1;
        padding: 16px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        text-align: center;
        display: inline-block;
      }

      .submit-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      .submit-button:active {
        transform: translateY(0);
      }

      .back-button {
        padding: 16px 25px;
        background: #95a5a6;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        text-align: center;
      }

      .back-button:hover {
        background: #7f8c8d;
        transform: translateY(-2px);
      }

      .success-message {
        background: #2ecc71;
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin-top: 20px;
        text-align: center;
        display: none;
        animation: slideDown 0.3s ease;
      }

      .success-message.show {
        display: block;
      }

      .password-rules {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
        border-left: 4px solid #667eea;
      }

      .password-rules h4 {
        color: #333;
        margin-bottom: 10px;
        font-size: 14px;
      }

      .password-rules ul {
        list-style: none;
        padding: 0;
      }

      .password-rules li {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
        padding-left: 15px;
        position: relative;
      }

      .password-rules li:before {
        content: "•";
        color: #667eea;
        position: absolute;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div class="forgot-container">
      <div class="forgot-header">
        <h1>Reset Your Password</h1>
        <p>Enter your details to receive reset instructions</p>
      </div>

      <form class="forgot-form" method="POST" action="forgot_passwordtemp.html">
        {% csrf_token %}
        
        <!-- Username -->
        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            name="username"
            placeholder="Enter your username"
            required
            pattern="[a-zA-Z0-9_]+"
            title="Only letters, numbers, and underscores allowed"
          />
          <div class="error-message" id="usernameError">
            Username can only contain letters, numbers, and underscores
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Enter your registered email"
            required
            pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
            title="Please enter a valid email address"
          />
          <div class="error-message" id="emailError">
            Please enter a valid email address (only one @ allowed, no special characters except . _ -)
          </div>
        </div>

        <!-- Password Rules -->
        <div class="password-rules">
          <h4>Username Requirements:</h4>
          <ul>
            <li>Only letters (a-z, A-Z), numbers (0-9), and underscores (_) allowed</li>
            <li>No spaces or special characters</li>
          </ul>
          <h4>Email Requirements:</h4>
          <ul>
            <li>Must contain exactly one @ symbol</li>
            <li>Only letters, numbers, underscores, periods, and hyphens allowed</li>
            <li>Must have a valid domain name</li>
          </ul>
        </div>

        <!-- Success Message -->
        <div class="success-message" id="successMessage">
          ✓ Reset instructions have been sent to your email!
        </div>

        <!-- Buttons -->
        <div class="button-group">
          <a href="{% url 'login' %}" class="back-button">Back to Login</a>
          <button type="submit" class="submit-button" id="submitBtn">
            Send Reset Link
          </button>
        </div>
      </form>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const username = document.getElementById("username");
        const email = document.getElementById("email");
        const forgotForm = document.querySelector(".forgot-form");
        const submitBtn = document.getElementById("submitBtn");
        const successMessage = document.getElementById("successMessage");
        const usernameError = document.getElementById("usernameError");
        const emailError = document.getElementById("emailError");

        // Real-time validation
        username.addEventListener("input", validateUsername);
        email.addEventListener("input", validateEmail);

        function validateUsername() {
          const value = username.value.trim();
          const usernameRegex = /^[a-zA-Z0-9_]+$/;
          
          if (value === "") {
            showError(username, usernameError, "Username is required");
            return false;
          } else if (!usernameRegex.test(value)) {
            showError(username, usernameError, "Only letters, numbers, and underscores allowed");
            return false;
          } else {
            showSuccess(username, usernameError);
            return true;
          }
        }

        function validateEmail() {
          const value = email.value.trim();
          const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
          const atCount = (value.match(/@/g) || []).length;
          
          if (value === "") {
            showError(email, emailError, "Email is required");
            return false;
          } else if (atCount !== 1) {
            showError(email, emailError, "Email must contain exactly one @ symbol");
            return false;
          } else if (!emailRegex.test(value)) {
            showError(email, emailError, "Invalid email format. Use only letters, numbers, . _ -");
            return false;
          } else {
            showSuccess(email, emailError);
            return true;
          }
        }

        function showError(input, errorElement, message) {
          input.classList.add("error");
          input.classList.remove("valid");
          errorElement.textContent = message;
          errorElement.classList.add("show");
        }

        function showSuccess(input, errorElement) {
          input.classList.remove("error");
          input.classList.add("valid");
          errorElement.classList.remove("show");
        }

        forgotForm.addEventListener("submit", function (e) {
          e.preventDefault();
          
          const isUsernameValid = validateUsername();
          const isEmailValid = validateEmail();

          if (isUsernameValid && isEmailValid) {
            // Show success message
            successMessage.classList.add("show");
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Sending...';
            
            // Simulate API call delay
            setTimeout(() => {
              // Here you would typically submit the form to your backend
              console.log("Form submitted successfully");
              console.log("Username:", username.value);
              console.log("Email:", email.value);
              
              // For demo purposes, we'll reset after 3 seconds
              setTimeout(() => {
                successMessage.classList.remove("show");
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Reset Link';
                forgotForm.reset();
                username.classList.remove("valid");
                email.classList.remove("valid");
              }, 3000);
              
            }, 1000);
          } else {
            successMessage.classList.remove("show");
          }
        });

        // Add input animations
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
          input.addEventListener('focus', function() {
            this.parentElement.style.transform = 'scale(1.02)';
          });
          
          input.addEventListener('blur', function() {
            this.parentElement.style.transform = 'scale(1)';
          });
        });
      });
    </script>
  </body>
</html>
